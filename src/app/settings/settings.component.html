<div class="settingsWindow">
  <div class="settingsMain">
    <ngb-tabset>
      <ngb-tab title="SignalK">
        <ng-template ngbTabContent>


          <form name="signalKForm" (ngSubmit)="updateSignalKURL()" #signalKForm="ngForm">
            <div class="form-group">
                <label class="" for="signalKURL">SignalK API Url <button type="submit" class="btn btn-sm btn-success" [disabled]="!signalKForm.form.valid">Update/Reset</button></label>
                <input type="url" class="form-control" id="signalKURL" name="signalKURL" [(ngModel)]="formSignalKURL" required pattern="https?://.+" #signalKURL="ngModel">
            </div>
            <div [hidden]="signalKURL.valid || signalKURL.pristine"
                  class="alert alert-danger">
                  Please enter valid signalK endpoint URL. ex: "http://demo.signalK.com/signalk"
            </div>
          </form>
          <hr>
          <div>
            <div>
              API URL: 
              <i class="fa fa-check" style="color:green;" aria-hidden="true" [hidden]="!endpointAPIStatus"></i>
              <i class="fa fa-times-circle" style="color:red;" aria-hidden="true" [hidden]="endpointAPIStatus"></i>
              {{ endpointAPIStatusMessage }}
            </div>
            <div>
                Websocket Status: 
                <i class="fa fa-check" style="color:green;" aria-hidden="true" [hidden]="!endpointWSStatus"></i>
                <i class="fa fa-times-circle" style="color:red;" aria-hidden="true" [hidden]="endpointWSStatus"></i>
                {{ endpointWSMessage }}
            </div>
            <div>
                HTTP REST Status: 
                <i class="fa fa-check" style="color:green;" aria-hidden="true" [hidden]="!endpointRESTStatus"></i>
                <i class="fa fa-times-circle" style="color:red;" aria-hidden="true" [hidden]="endpointRESTStatus"></i>
                {{ endpointRESTMessage }}
            </div>
          </div>
        </ng-template>
      </ngb-tab>
      <ngb-tab title="Historical Data Sets">
        <ng-template ngbTabContent>

          <div class="form-group">
            <label for="dataSet">Delete DataSet:</label> <button type="submit" class="btn btn-sm btn-danger" (click)='deleteDataSet()'>Delete</button>
            <select class="form-control" id="dataSet"  [(ngModel)]="selectedDataSet" size=5>
                <option *ngFor="let ds of dataSets" [value]="ds.uuid">{{ds.name}}</option>
            </select>
          </div>
          <button type="submit" class="btn btn-sm btn-success" (click)='deleteDataSet()'>Add New</button>


        </ng-template>
      </ngb-tab>  
      <ngb-tab title="Config">
        <ng-template ngbTabContent>
          <button type="submit" class="btn btn-sm btn-success" (click)='resetSettings()'>Reset</button>
        </ng-template>
      </ngb-tab>  
    </ngb-tabset>
  </div>
</div>

<ng-template #newDataSetModal let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title">New Dataset:</h4>
    </div>
    <div class="modal-body">
      <div class="form-group">
          <label for="widget">Widget</label>
          <select class="form-control" id="widget"  [(ngModel)]="newWidget" required>
              <option *ngFor="let widget of widgetList" [value]="widget.name">{{widget.description}}</option>
          </select>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="c('Close click')">Cancel</button>
      <button type="button" class="btn btn-secondary" (click)="changeWidget()">Confirm</button>
    </div>
  </ng-template>